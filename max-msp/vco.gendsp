{
	"patcher" : 	{
		"fileversion" : 1,
		"appversion" : 		{
			"major" : 8,
			"minor" : 0,
			"revision" : 5,
			"architecture" : "x64",
			"modernui" : 1
		}
,
		"classnamespace" : "dsp.gen",
		"rect" : [ 34.0, 164.0, 1389.0, 808.0 ],
		"bglocked" : 0,
		"openinpresentation" : 0,
		"default_fontsize" : 12.0,
		"default_fontface" : 0,
		"default_fontname" : "Arial",
		"gridonopen" : 1,
		"gridsize" : [ 15.0, 15.0 ],
		"gridsnaponopen" : 1,
		"objectsnaponopen" : 1,
		"statusbarvisible" : 2,
		"toolbarvisible" : 1,
		"lefttoolbarpinned" : 0,
		"toptoolbarpinned" : 0,
		"righttoolbarpinned" : 0,
		"bottomtoolbarpinned" : 0,
		"toolbars_unpinned_last_save" : 0,
		"tallnewobj" : 0,
		"boxanimatetime" : 200,
		"enablehscroll" : 1,
		"enablevscroll" : 1,
		"devicewidth" : 0.0,
		"description" : "",
		"digest" : "",
		"tags" : "",
		"style" : "",
		"subpatcher_template" : "",
		"boxes" : [ 			{
				"box" : 				{
					"code" : "// @see http://musicdsp.org/archive.php?classid=1#90\r\n\t\r\n// oscillator state:\r\nHistory cps(0), period(0);\r\nHistory phase(1);\r\n\r\n// DSF parameters:\r\nHistory num_partials(1);\r\nHistory rolloff(0.25), partial_rolloff(0.25);\r\n\r\n// amplitude at Nyquist:\r\nParam amp_at_nyquist(0.5, min=0, max=0.9999);\r\n\r\n// lowpass filter state:\r\nHistory lpa(0), lpb(0);\r\nHistory lpx1(0), lpy1(0);\r\n\r\nsmoothing = 0.0001;\t\r\n\r\n// only update wave parameters at cycle boundaries:\r\nif (phase >= 1 || cps == 0) {\r\n\tphase = phase - 1;\r\n\t\r\n\t// new cycle, update freq etc.\r\n\tfreq = in1;\r\n\t// valid only above zero and below Nyquist:\r\n\tcps = clip(freq/samplerate, 0.0001, 0.5);\r\n\tperiod = 1/cps;\r\n\tP2 = period/2;\r\n\t// number of partials including DC:\r\n\tnum_partials = 1 + floor(P2); \r\n\t// roll-off paramters:\r\n\trolloff = pow(amp_at_nyquist, 1/P2);\r\n\tpartial_rolloff = pow(rolloff, num_partials);\r\n} \r\n\r\n// DSF section:\r\nbeta = twopi * phase;\r\nbeta_n = num_partials * beta;\r\ncosbeta = cos(beta);\r\n\r\n// The DSF BLIT is scaled by 1 / period \r\n// to give approximately the same peak-to-peak \r\n// over a wide range of frequencies.\r\nn = 1 - \r\n\tpartial_rolloff * cos(beta_n) - \r\n\trolloff * (cosbeta - partial_rolloff * cos(beta_n - beta));\r\nd = period * (1 + rolloff * (-2 * cosbeta + rolloff));\r\n\r\n// division can fail only if |a| == 1\r\n// subtracting fundamental freq gets rid of DC\r\nx = n / d - cps;\r\n\r\n// lowpass filter:\r\nomega = atan(pi * smoothing);\r\nlpa = -(1-omega)/(1+omega);\r\nlpb = (1-lpb)/2;\r\ny = lpb * (x + lpx1) - lpa * lpy1;\r\nlpx1 = x;\r\nlpy1 = y;\r\n\r\n// post-scale to -0.5..0.5:\r\nout1 = y * -pi;\r\n\r\n// update phase\r\nphase = phase + cps;\r\n",
					"fontface" : 0,
					"fontname" : "Menlo",
					"fontsize" : 12.0,
					"id" : "obj-25",
					"maxclass" : "codebox",
					"numinlets" : 1,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 571.0, -28.0, 536.0, 734.0 ]
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-26",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 0,
					"patching_rect" : [ 571.0, 716.0, 123.0, 23.0 ],
					"text" : "out 4 @comment saw"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-6",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 35.0, 174.0, 84.0, 22.0 ],
					"text" : "clamp 0. 6000"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-5",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 242.0, 117.0, 71.0, 22.0 ],
					"text" : "fold 0. 6000"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-2",
					"maxclass" : "newobj",
					"numinlets" : 2,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 242.0, 87.0, 29.5, 22.0 ],
					"text" : "*"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-10",
					"maxclass" : "newobj",
					"numinlets" : 2,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 252.5, 56.0, 111.0, 22.0 ],
					"text" : "scale -1. 1. 0. 2000"
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-8",
					"maxclass" : "newobj",
					"numinlets" : 0,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 35.0, 1.0, 139.0, 23.0 ],
					"text" : "param rate @min 1 6000"
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-4",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 0,
					"patching_rect" : [ 361.0, 587.0, 164.0, 23.0 ],
					"text" : "out 3 @comment triangle"
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-3",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 0,
					"patching_rect" : [ 176.5, 587.0, 158.0, 23.0 ],
					"text" : "out 2 @comment phasor"
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-50",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 0,
					"patching_rect" : [ 35.0, 587.0, 141.0, 23.0 ],
					"text" : "out 1 @comment sine"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-41",
					"maxclass" : "newobj",
					"numinlets" : 0,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 252.5, 18.0, 135.0, 22.0 ],
					"text" : "in 1 @comment rate_cv"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-24",
					"maxclass" : "newobj",
					"numinlets" : 2,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 120.0, 252.0, 48.0, 22.0 ],
					"text" : "triangle"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-22",
					"maxclass" : "newobj",
					"numinlets" : 2,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 73.0, 252.0, 45.0, 22.0 ],
					"text" : "phasor"
				}

			}
, 			{
				"box" : 				{
					"id" : "obj-9",
					"maxclass" : "newobj",
					"numinlets" : 1,
					"numoutlets" : 2,
					"outlettype" : [ "", "" ],
					"patching_rect" : [ 35.0, 252.0, 36.0, 22.0 ],
					"text" : "cycle"
				}

			}
, 			{
				"box" : 				{
					"fontname" : "Lato",
					"fontsize" : 12.0,
					"id" : "obj-1",
					"maxclass" : "newobj",
					"numinlets" : 2,
					"numoutlets" : 1,
					"outlettype" : [ "" ],
					"patching_rect" : [ 35.0, 110.0, 29.5, 23.0 ],
					"text" : "+"
				}

			}
 ],
		"lines" : [ 			{
				"patchline" : 				{
					"destination" : [ "obj-6", 0 ],
					"source" : [ "obj-1", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-2", 1 ],
					"source" : [ "obj-10", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-5", 0 ],
					"source" : [ "obj-2", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-3", 0 ],
					"source" : [ "obj-22", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-4", 0 ],
					"source" : [ "obj-24", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-26", 0 ],
					"source" : [ "obj-25", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-10", 0 ],
					"source" : [ "obj-41", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-1", 1 ],
					"source" : [ "obj-5", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-22", 0 ],
					"order" : 2,
					"source" : [ "obj-6", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-24", 0 ],
					"order" : 1,
					"source" : [ "obj-6", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-25", 0 ],
					"order" : 0,
					"source" : [ "obj-6", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-9", 0 ],
					"order" : 3,
					"source" : [ "obj-6", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-1", 0 ],
					"order" : 1,
					"source" : [ "obj-8", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-2", 0 ],
					"order" : 0,
					"source" : [ "obj-8", 0 ]
				}

			}
, 			{
				"patchline" : 				{
					"destination" : [ "obj-50", 0 ],
					"source" : [ "obj-9", 0 ]
				}

			}
 ]
	}

}
